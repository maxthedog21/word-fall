import{a as m,o as g}from"./index-Bub3QOW4.js";function p(t){return Math.floor(Math.random()*t+1)}function x(t,s,r,l,h){this.paused=!1,this.bufferWordList=[],this.wordList=[],this.width=s,this.height=r,this.callFlag=!1,this.processWordList=function(e){let i=e.map(n=>new L(n,`${p(25)}px Arial`,"white",p(this.width-100),0,0,Math.random(),h));this.wordList=[...this.wordList,...i]},this.nextWordList=async function(){this.bufferWordList.length<1&&!this.callFlag&&(this.callFlag=!0,this.bufferWordList=await l(2),this.callFlag=!1),this.processWordList(this.bufferWordList),this.bufferWordList=[]},this.letterIndex=0,this.score=0,this.wordsHit=0,this.ctx=h,this.drawWords=function(){this.wordDone(),this.wordList.length<=t/2&&this.nextWordList(),this.wordList.forEach(e=>{e.fall()})},this.letterClicked=function(e,i){let n=e.key;n==="1"&&(this.paused=!this.paused);let d=0;i.wordList.forEach(f=>{f.letterCheck(n,i.letterIndex)&&(f.wordFilled++,d++,i.score+=i.letterIndex)}),i.letterIndex=d>0?i.letterIndex+1:i.letterIndex},this.resetWordFill=function(){this.wordList.forEach(e=>{e.resetWordFill()})},this.wordDone=function(){this.wordList=this.wordList.filter(e=>{let{wordCompleted:i,pastHeight:n,slightFilledButPassed:d}=e.isWordDone(this.height);if(i||d)this.letterIndex=0,this.resetWordFill();else if(!n)return e}).map(e=>e.reset())}}function L(t,s,r,l,h,e,i,n){const d=["r","t","i","l","j","f"],f=["w","m"];this.ctx=n,this.word=t,this.wordFilled=e,this.font=s,this.fontColor=r,this.x=l,this.y=h,this.accelaration=i,this.isWordDone=function(o){let a=this.wordFilled===this.word.length,c=this.y>o,u=this.y>o&&this.wordFilled>0;return{wordCompleted:a,pastHeight:c,slightFilledButPassed:u}},this.resetWordFill=function(){this.wordFilled=0},this.draw=function(){let o="",a=0,c=20;this.word.split("").forEach((u,w)=>{this.ctx.font="30px Arial",w<this.wordFilled?this.ctx.fillStyle="red":this.ctx.fillStyle="white",d.includes(o)?a-=10:f.includes(o)&&(a+=10),this.ctx.fillText(u,this.x+c*w+a,this.y),o=u})},this.fall=function(){this.y+=this.accelaration,this.draw()},this.reset=function(){return this},this.letterCheck=function(o,a){let c=this.word.split("");return a===this.wordFilled&&c[a]===o}}async function y(t){return await(await fetch("https://random-word-api.herokuapp.com/word?number="+t,{headers:{}})).json()}async function W(t,s,r){return new x(10,t,s,v,r)}async function v(t){return await y(t)}const F=(t,s)=>{const r=t.__vccOpts||t;for(const[l,h]of s)r[l]=h;return r},_={name:"GamePage",components:{},data(){return{clientId:"",redirectURI:"",canvas:null,game:null,ctx:null}},async mounted(){window.addEventListener("resize",this.updateCanvasSize),this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=document.body.offsetWidth,this.canvas.height=document.body.offsetHeight,this.game=await W(this.canvas.width,this.canvas.height,this.ctx),this.ctx.font="30px Arial",this.ctx.fillStyle="white",this.ctx.fillText("test",10,150),window.addEventListener("keypress",this.letterClicked),window.requestAnimationFrame(this.runGame)},methods:{letterClicked(t){this.game.letterClicked(t,this.game)},runGame(){this.clearRectangle(),this.game.drawWords(),window.requestAnimationFrame(this.runGame)},clearRectangle(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},updateCanvasSize(){this.canvas.width=document.body.offsetWidth,this.canvas.height=document.body.offsetHeight}}},b={id:"canvas"};function C(t,s,r,l,h,e){return g(),m("canvas",b)}const k=F(_,[["render",C]]),E=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{k as G,F as _,E as a};
